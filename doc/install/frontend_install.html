<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8">
  <title>Installation of a VO Frontend</title>
  <meta name="CREATED" content="20071113;16540800">
  <meta name="CHANGEDBY" content="Igor Sfiligoi">
  <meta name="CHANGED" content="20080806;12593100">
</head>

<body lang="en-US" dir="ltr">
<h1><font face="Bitstream Vera Serif"><font size="4">Installation of a VO
Frontend </font></font> </h1>
<hr>

<table>
  <tbody>
    <tr align="center">
      <td>[</td>
      <td><a href="#description">Description</a></td>
      <td>|</td>
      <td><a href="#hardware">Hardware requirements</a></td>
      <td>|</td>
      <td><a href="#software">Needed software</a></td>
      <td>|</td>
      <td><a href="#system">Base tools installation</a></td>
      <td>|</td>
      <td><a href="#frontend">VO Frontend installation</a></td>
      <td>|</td>
      <td><a href="#monitoring">VO Frontend monitoring</a></td>
      <td>]</td>
    </tr>
  </tbody>
</table>
<hr>

<table cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td valign="top"><h2><a name="description"><font
        face="Bitstream Vera Serif"><font size="4">1. Description
        </font></font> </a></h2>

        <p><font face="Liberation Serif"><font size="3">The VO Frontend will
        match user jobs with glidein factory ads. It is responsible for the
        submission of new glideins.</font></font></p>

        <p><font face="Liberation Serif"><font size="3">The VO frontend also keeps part of the configuration of a glidein,
        and can also provide the <a href="factory_install.html">glidein
        Factory</a> with the pilot proxies.</font></font></p>

        <h2><a name="hardware"><font face="Bitstream Vera Serif"><font
        size="4">2. Hardware requirements </font></font> </a></h2>

        <p><font face="Liberation Serif"><font size="3">This machine needs
        <b>a fast CPU</b> and a moderate amount of <b>memory</b> (<b>1GB
        </b>should be enough).<br>
        The <b>disk</b> needed is just for binaries, config files and log
        files (<b>20GB</b> should be enough)</font></font></p>

        <h2><a name="software"><font face="Bitstream Vera Serif"><font
        size="4">3. Needed software </font></font> </a></h2>

        <p><font face="Liberation Serif"><font size="3">Any <a
        href="http://www.cs.wisc.edu/condor/manual/v7.0/1_5Availability.html">Condor-supported
        OS</a>.<br>
        The <a
        href="https://twiki.grid.iu.edu/twiki/bin/view/Documentation/WebHome">OSG
        client software</a>.<br>
        The <a href="http://www.cs.wisc.edu/condor/downloads/">Condor
        distribution</a>.<br>
        A HTTP server, like <a href="http://www.apache.org/">Apache</a> or <a
        href="http://www.stllinux.org/meeting_notes/2001/0719/tux/intro.html">TUX</a>.<br>
        The <a href="http://oss.oetiker.ch/rrdtool/">RRDTool package</a>
        (v1.2.18 or later)<br>
        The <a href="http://freshmeat.net/projects/m2crypto">M2Crypto python
        library</a> (v0.17 or later)<br>
        The <a
        href="http://sourceforge.net/projects/javascriptrrd/">javascriptRRD</a>
        package (0.5 or later)<br>
        The perl-Time-HiRes rpm.<br>
        The <a
        href="index.html">glideinWMS
        software</a>. </font></font></p>
      </td>
      <td><p><img src="overview_frontend.png" name="graphics1" align="bottom"
        border="0"> </p>
      </td>
    </tr>
  </tbody>
</table>

<p><font face="Liberation Serif"><font size="3"><strong>NOTE:</strong>
<ul>
  <li>Condor version v7.3.1 has a known issue with incorrect return/exit codes of condor_status and condor_q</li>
  <li>If you are using Condor version v7.3.2 disable VOMS checking in condor_config file used by condor daemons other than that used by user schedd. VOMS checking adds unrequired overhead. To do so, set <br>
  USE_VOMS_ATTRIBUTES = False <br>
  or for individual condor daemons like collector<br>
  COLLECTOR.USE_VOMS_ATTRIBUTES = False <br>
  </li>
</ul>
</p>


<h2><a name="system"><font face="Bitstream Vera Serif"><font size="4">4. Base
tools installation instructions</font></font></a></h2>

<h3><font face="Liberation Serif"><font size="3">4.1 Condor</font>
</font></h3>

<p><font face="Liberation Serif"><font size="3">The VO Frontend will need the
the Condor binaries. You can reuse an existing installation,
if available, like if you host the VO Frontend on the <a
href="schedd_install.html">a submitter node</a>.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Else you need to install a
local copy. The suggested way is to install as the same non privileged <font
face="Liberation Serif"><font size="3"><b>VO Frontend</b></font></font> user
(see <a href="#frontend">below</a>). <br>
The whole process is managed by a install script described below. You will
need to provide a valid <a
href="http://www.cs.wisc.edu/condor/downloads/">Condor tarball</a>, so you
may as well download it before starting the installer.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Move into</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font
  size="3">glideinWMS/install</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">and execute</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font
  size="3">./glideinWMS_install</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">You will be presented with
this screen:</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font size="3">What do you want to
  install?<br>
  (May select several options at one, using a , separated list)<br>
  [1] glideinWMS Collector<br>
  [2] Glidein Factory<br>
  [3] GCB<br>
  [4] pool Collector<br>
  [5] Schedd node<br>
  [6] Condor for VO Frontend<br>
  [7] VO Frontend<br>
  [8] Components</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">Select
<b>6</b>.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Now follow the instructions.
The installation is straightforward.</font></font></p>

<h3><font face="Liberation Serif"><font size="3">4.2 OSG VDT Client
</font></font></h3>

<p><font face="Liberation Serif"><font size="3">The VO Frontend will need the
OSG client provided by VDT. You can reuse an existing installation,
if available, like if you host the VO Frontend on the <a
href="schedd_install.html">a submitter node</a>.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Else you need to install a
local copy. The suggested way is to install as the same non privileged <font
face="Liberation Serif"><font size="3"><b>VO Frontend</b></font></font> user
(see <a href="#frontend">below</a>). <br>
The whole process is managed by a install script described below.
</font></font></p>

<p><font face="Liberation Serif"><font size="3">Move into</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font
  size="3">glideinWMS/install</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">and execute</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font
  size="3">./glideinWMS_install</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">You will be presented with
this screen:</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font size="3">What do you want to
  install?<br>
  (May select several options at one, using a , separated list)<br>
  [1] glideinWMS Collector<br>
  [2] Glidein Factory<br>
  [3] GCB<br>
  [4] pool Collector<br>
  [5] Schedd node<br>
  [6] Condor for VO Frontend<br>
  [7] VO Frontend<br>
  [8] Components</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">Select
<b>8</b>.</font></font></p>

<p><font face="Liberation Serif"><font size="3">You will be given another
menu:</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font size="3">What do you want to
  install?<br>
  (May select several options at one, using a , separated list)<br>
  [a] OSG VDT client<br>
  [b] Base Condor installation<br>
  [c] Web server<br>
  [d] rrdtool graphics package<br>
  [e] PostgreSQL database<br>
  [f] Quill-specific PostgreSQL database</font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">Select
<b>a</b>.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Now follow the instructions.
The installation is straightforward.</font></font></p>

<h3><a name="system_httpd"><font face="Liberation Serif"><font size="3">4.3
HTTP server</font></font></a></h3>

<p><font face="Liberation Serif"><font size="3">The VO frontend needs a HTTP
server, like <a href="http://www.apache.org/">Apache</a> or <a
href="http://www.stllinux.org/meeting_notes/2001/0719/tux/intro.html">TUX</a>.
The server should be installed on the same node, but a different node can be
used as long as the web area is writable from this one.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Servers often come
pre-installed with HTTP server software, so if you have one running, just
reuse it.<br>
Else, the installer can help you install one (as root).</font></font></p>

<p><font face="Liberation Serif"><font size="3">To use the installer, move
into</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font
  size="3">glideinWMS/install</font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">and execute</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font
  size="3">./glideinWMS_install</font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">You will be presented with
this screen:</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font size="3">What do you want to
  install?<br>
  (May select several options at one, using a , separated list)<br>
  [1] glideinWMS Collector<br>
  [2] Glidein Factory<br>
  [3] GCB<br>
  [4] pool Collector<br>
  [5] Schedd node<br>
  [6] Condor for VO Frontend<br>
  [7] VO Frontend<br>
  [8] Components</font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">Select
<b>8</b>.</font></font></p>

<p><font face="Liberation Serif"><font size="3">You will be given another
menu:</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font size="3">What do you want to
  install?<br>
  (May select several options at one, using a , separated list)<br>
  [a] OSG VDT client<br>
  [b] Base Condor installation<br>
  [c] Web server<br>
  [d] rrdtool graphics package<br>
  [e] PostgreSQL database<br>
  [f] Quill-specific PostgreSQL database</font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">Select
<b>c</b>.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Now follow the instructions.
Most of the questions should be fairly straightforward.</font></font></p>

<h3><a name="system_rrdtool"><font face="Liberation Serif"><font size="3">4.4
RRDTool</font></font></a></h3>

<p><font face="Liberation Serif"><font size="3">You will also need the python
module for <a href="http://oss.oetiker.ch/rrdtool/">RRDTool</a> (v1.2.18 or
later). Many systems come with packages for it; if possible use
that.</font></font></p>

<p><font face="Liberation Serif"><font size="3">RPMs for Redhat/Scientific
Linux distributions can be found at</font></font></p>

<p><a href="http://dag.wieers.com/rpm/packages/rrdtool/"><font
face="Liberation Serif"><font
size="3">http://dag.wieers.com/rpm/packages/rrdtool/</font></font></a></p>

<p><font face="Liberation Serif"><font size="3">Install python-rrdtool*.rpm
and related dependencies.</font></font></p>

<p><font face="Liberation Serif"><font size="3">If installing as root is not
an option, you can build from the sources, as the </font></font><font
face="Liberation Serif"><font size="3"><b>vo frontend</b></font></font> <font
face="Liberation Serif"><font size="3">user (see <a
href="#frontend">below</a>), and put the python libraries into the
PYTHON_PATH.<br>
The source code can be downloaded from:<br>
<a
href="http://oss.oetiker.ch/rrdtool/pub/">http://oss.oetiker.ch/rrdtool/pub/</a></font></font></p>

<p><font face="Liberation Serif"><font size="3">Beware: The build process has
several dependencies that make it complicated. Use this option only if you
cannot install from RPMs (or similar). </font></font> </p>

<h3><font face="Liberation Serif"><font size="3">4.5
M2Crypto</font><font></font></font></h3>

<p><font face="Liberation Serif"><font size="3">If you are passing the proxy
from the VO Frontend to the glidein Factory, you will need the <a
href="http://freshmeat.net/projects/m2crypto">M2Crypto python library</a>. A
few systems include it in the software distribution; if possible install the
system one.</font></font></p>

<p><font face="Liberation Serif"><font size="3">If your system does not come
with m2crypto package, or you do not can/want install it as root, compile it
from source as the </font></font><font face="Liberation Serif"><font
size="3"><b>VO frontend</b></font></font> <font face="Liberation Serif"><font
size="3">user (see <a href="#frontend">below</a>).<br>
The source code can be downloaded from:<br>
<a
href="http://chandlerproject.org/Projects/MeTooCrypto#Downloads">http://chandlerproject.org/Projects/MeTooCrypto#Downloads</a></font></font></p>

<p><font face="Liberation Serif"><font size="3">The build process is very
easy:</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font size="3">python setup.py build<br>
  python setup.py install --root <i>&lt;base
dir&gt;</i></font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">Finally add M2Crypto into the
PYTHONPATH, possibly in the .profile, .bashrc, and/or in the
.cshrc:</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font size="3">export
  PYTHONPATH=$PYTHONPATH:<i>&lt;base
  dir&gt;</i>/usr/lib/python2.3/site-packages/</font></font></blockquote>

<h3><a name="system_javascriptRRD"><font face="Liberation Serif"><font
size="3">4.6 javascriptRRD</font></font></a></h3>

<p><font face="Liberation Serif"><font size="3">You will need the <a
href="http://sourceforge.net/projects/javascriptrrd/">javascriptRRD
package</a>. It contains the javascript libraries needed by the
monitoring.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Just download the tarball,
and untar it. You will need to point the installer to this
directory.</font></font></p>

<h2><a name="frontend"><font face="Bitstream Vera Serif"><font size="4">5. VO
Frontend installation </font></font> </a></h2>

<p><font face="Liberation Serif"><font size="3">The VO Frontend needs a x509
proxy to communicate with the glidein Factory. You need to create such proxy
before starting a VO Frontend and then keep it valid for the life of the
frontend. If used for job submission (i.e. if it is passed to the glidein
Factory), this proxy must at any point in time have a validity of at least
the longest expected job being run by the glideinWMS (and not less than 12
hours).<br>
How you keep this proxy valid (via MyProxy, kx509, voms-proxy-init from a
local certificate, scp from other nodes, or other methods), is beyond the
scope of this document. </font></font></p>

<p><font face="Liberation Serif"><font size="3">The VO frontend can also host the x509 proxies used for glidein
submission. If you do use this (recommended) method, you need to keep these
proxies valid at all time, as you do for the main frontend proxy.</font></font></p>

<p><font face="Liberation Serif"><font size="3">The VO Frontend should be
installed as a non privileged user. The provided installer can be used to
create the configuration file, although some manual tunning will probably be
needed.</font></font></p>

<p><font face="Liberation Serif"><font size="3">Before starting the installation
of the VO Frontend make sure that the WMS Collector is started and running.
</font></font></p>

<p><font face="Liberation Serif"><font size="3">Assuming VDT is installed in $VDT_LOCATION, source VDT's setup as follows</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font
  size="3">source $VDT_LOCATION/setup.sh</font></font></p>
</blockquote>
<p><font face="Liberation Serif"><font size="3">Move into</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font
  size="3">glideinWMS/install</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">and execute</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font
  size="3">./glideinWMS_install</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">You will be presented with
the service selection screen. Follow the instructions.</font></font></p>

<p><font face="Liberation Serif"><font size="3">You will need to specify the
selection and matching criteria for the user jobs. The suggested
values</font></font> </p>

<blockquote>
  <p><font face="Liberation Serif"><font size="3">jobs_constraint =
  (JobUniverse==5)&amp;&amp;(DESIRED_Sites=!=UNDEFINED)<br>
  match_string = glidein["attrs"]["GLIDEIN_Site"] in
  job["DESIRED_Sites"].split(",")</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">should be fine for some basic
matchmatching, providing that your user jobs add</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font size="3">+DESIRED_Sites =
  “site1,site2,...siteN”<br>
  requirements=stringListMember(GLIDEIN_Site, DESIRED_Sites)</font></font></p>
</blockquote>
<font face="Liberation Serif"><font size="3">(Look at the <a
href="../manual/frontend/index.html#management">glideinWMS manual</a> for
more details.)</font></font>
<p><font face="Liberation Serif"><font size="3">Here a possible set of
answers is presented; your setup will probably be slightly
different:</font></font></p>
<pre style="margin-left: 0.39in; margin-right: 0.39in; margin-bottom: 0.2in">
Welcome to the glideinWMS Installation Helper

What do you want to install?
(May select several options at one, using a , separated list)
[1] glideinWMS Schedds and Collector
[2] Glidein Factory
[3] GCB
[4] User Pool Collector
[5] User Schedd
[6] Condor for VO Frontend
[7] VO Frontend
[8] Components
Please select: <b>7</b>

The following profiles will be installed:
[7] VO Frontend


Installing VO Frontend

Do you have already a javascriptRRD installation?: (y/n) <b>y</b>
Where is javascriptRRD installed?: /home/frontend/javascriptrrd-0.5.0
Where will you host your config files?: [/home/frontend/frontstage] <b>/home/frontend/frontstage</b>
Where will the web data be hosted?: [/var/www/html/vofrontend] <b>/var/www/html/vofrontend</b>
What Web URL will you use?: [http://frontend1.my.org/vofrontend/] <b>http://frontend1.my.org/vofrontend</b>
Where will you host your log files?: [/home/frontend/frontlogs] <b>/home/frontend/frontlogs</b>
Directory '/home/frontend/frontlogs' does not exist, should I create it?: (y/n) <b>y</b>
Give a name to this VO Frontend?: [myVO-vofrontend1] <b>vofrontend1</b>
Give a name to this VO Frontend instance?: [v1_0] <b>v1_0</b>

What node is the WMS collector (i.e. the gfactory) running?: <b>gfactory1.my.org</b>
What is the classad identity of the glidein factory?: [gfactory@gfactory1.my.org] <b>gfactory@gfactory1.my.org</b>
What is the WMS collector DN (i.e. subject)?: <b>"/DC=org/DC=doegrids/OU=Service/CN=gfactory/gfactory1.my.org"</b>

To use the VO Frontend you need a valid GSI proxy.
VO Frontend will use this proxy to talk to the WMS Collector and User Schedd
Where is your proxy located?: <b>/home/frontend/security/grid_proxy</b>

Using DN '/DC=org/DC=doegrids/OU=Service/CN=frontend/frontend1.my.org'
Make sure this DN is in the WMS collector condor_mapfile

For security reasons, we need to know what will the WMS collector map us to.
It will likely be something like joe@gfactory1.my.org
What is the mapped name?: <b>frontenduser1@gfactory1.my.org</b>


We are done with the WMS collector (i.e. gfactory) config
Let's configure the access to the local (user) pool

Using pool collector collector1.ny.org:9618
What is the pool collector DN (i.e. subject)?: <b>/DC=org/DC=doegrids/OU=Services/CN=collector1.my.org</b>

List and secondary pool collector the glideins should use
instead of the main collector.
(leave empty if you want to use the main collector only)
Valid syntaxes are:
 master1.my.org:9620-9624
 master1.my.org:9619
 master3.my.org
Leave an empty collector name when finished.
Collector name:
The following schedds have been found:
 [1] schedd_jobs1@frontend1.my.org
 [2] schedd_jobs2@frontend1.my.org
 [3] schedd_jobs3@frontend1.my.org
 [4] schedd_jobs4@frontend1.my.org
Do you want to monitor all of them?: (y/n) <b>y</b>
Using ['schedd_jobs1@frontend1.my.org', 'schedd_jobs2@frontend1.my.org', 'schedd_jobs3@frontend1.my.org', 'schedd_jobs4@frontend1.my.org']

What is the DN (i.e. subject) for schedd schedd_jobs1@frontend1.my.org?: <b>'/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org'</b>
What is the DN (i.e. subject) for schedd schedd_jobs2@frontend1.my.org?: <b>'/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org'</b>
What is the DN (i.e. subject) for schedd schedd_jobs3@frontend1.my.org?: <b>'/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org'</b>
What is the DN (i.e. subject) for schedd schedd_jobs4@frontend1.my.org?: <b>'/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org'</b>
What kind of jobs do you want to monitor?: [(JobUniverse==5)&&(GLIDEIN_Is_Monitor =!= TRUE)&&(JOB_Is_Monitor =!= TRUE)]
Give a name to the main group: [main] <b>main</b>
What expression do you want to use to match glideins to jobs?
It is an arbitrary python boolean expression using the dictionaries
  glidein and job
A simple example expression would be:
  glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",")
If you want to match all (OK for simple setups),
  just specify True (the default)
Match string: [True] <b>glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",")</b>
What job attributres are you using in the match expression?
I have computed my best estimate for your match string,
please verify and correct if needed.
Job attributes: [DESIRED_Sites] <b>DESIRED_Sites</b>
What glidein/factory attributres are you using in the match expression?
I have computed my best estimate for your match string,
please verify and correct if needed.
Factory attributes: [GLIDEIN_Site] <b>GLIDEIN_Site</b>
My DN = '/DC=org/DC=doegrids/OU=Service/CN=frontend/frontend1.my.org'

VO frontend proxy = '/home/sfiligoi/.globus/x509_service_proxy'
Do you want to use is to submit glideins: (y/n) [y] <b>n</b>
You may want to use other proxies
Please add all the proxies that this glidein will use

An empty entry means you are done.
proxy fname: <b>/home/frontend/security/x509_glidein_proxy1</b>
proxy fname: <b>/home/frontend/security/x509_glidein_proxy2</b>
proxy fname: <b>/home/frontend/security/x509_glidein_proxy3</b>
proxy fname:
My DNs = ['/DC=org/DC=doegrids/OU=Service/CN=pilot1/myVO.my.org', '/DC=org/DC=doegrids/OU=Service/CN=pilot2/myVO.my.org', '/DC=org/DC=doegrids/OU=Service/CN=pilot3/myVO.my.org']

You will most probably need other DNs in the glidein grid mapfile
Please add all the DNs that this glidein will connect to
(usually the Pool Collector and the Submit nodes)

Please insert all such DNs, together with a user nickname.
An empty DN entry means you are done.

DN: <b>/DC=org/DC=doegrids/OU=Services/CN-collector1.my.org</b>
nickname: [condor001] <b>collector</b>

DN: <b>/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org</b>
nickname: [condor002] <b>schedd1</b>

DN (leave empty when finished):
Do you want to use the more efficient Match authentication (works for Condor v7.3.0 and later)?: (y/n) <b>y</b>

Make sure you use Match authentication in the schedds, too

Do you want to expose the Grid env. to the user jobs?: (y/n) <b>y</b>
Do you want to create the VO Frontend instance (as opposed to just the config file)?: (y/n) [n] <b>n</b>
To create the VO Frontend instance, you need to run
/home/frontend/glideinWMS/creation/create_frontend

Configuration files are located in /home/frontend/frontstage/instance_v1.cfg
Remember to set X509_USER_PROXY before starting the daemon
</pre>
<p><font face="Liberation Serif"><font size="3">If you followed the example
above, you ended up with a configuration file in </font></font><font
face="Liberation Serif"><font
size="3"><b>/home/frontend/frontstage/instance_v1.cfg/frontend.xml</b></font></font><font
face="Liberation Serif"><font size="3">. Edit this file to suit your needs
and than create the frontend instance with:</font></font></p>
<blockquote>
  <p><font face="Liberation Serif"><font size="3">
  /home/frontend/glideinWMS/creation/create_frontend /home/frontend/frontstage/instance_v1.cfg/frontend.xml
  </font></font></p>
</blockquote>


<h3><font face="Utopia, serif"><font size="3">5.1. Starting the VO Frontend
</font></font> </h3>

<p><font face="Liberation Serif"><font size="3">Use the startup
script:</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font size="3">
  source $VDT_LOCATION/setup.sh<br>
  export X509_USER_PROXY=&lt;Proxy that this frontend instance should use&gt;<br>
  cd &lt;install dir&gt;<br>
  ./frontend_startup start</font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">The same script can be used
to stop, reconfig and restart the VO Frontend.</font></font> </p>

<h3><font face="Utopia, serif"><font size="3">5.1. Reconfiguring the VO Frontend
</font></font> </h3>

<p><font face="Liberation Serif"><font size="3">If you make changes to the configuration file /home/frontend/glideinWMS/creation/create_frontend /home/frontend/frontstage/instance_v1.cfg/frontend.xml from above after creating glidein, run reconfig_frontend tool to propagate the changes to the frontend configuration.
script:</font></font></p>

<blockquote>
  <p><font face="Liberation Serif"><font size="3">
    glideinWMS/creation/reconfig_frontend -writeback yes /home/frontend/frontstage/instance_v1.cfg/frontend.xml
  </font></font></p>
</blockquote>

<p><font face="Liberation Serif"><font size="3">If you make changes to the frontend.xml configuration file in the &lt;install dir&gt; use following command to propagate the changes<br>
<blockquote>
  <p><font face="Liberation Serif"><font size="3">
frontend_startup reconfig
</font></font></p>
</blockquote>
<h2><a name="monitoring"><font face="Bitstream Vera Serif"><font size="4">6.
VO Frontend monitoring </font></font> </a></h2>

<p><font face="Liberation Serif"><font size="3">There are several ways to
monitor the Vo Frontend:</font></font></p>
<ul>
  <li><p><font face="Liberation Serif"><font size="3"><a
    href="#monitoring_web">Using the Web monitoring</a></font></font></p>
  </li>
  <li><p><font face="Liberation Serif"><font size="3"><a
    href="#monitoring_tools">Using the WMS tools</a></font></font></p>
  </li>
  <li><p><font face="Liberation Serif"><font size="3"><a
    href="#monitoring_logs">Looking at the VO frontend log
    files</a></font></font> </p>
  </li>
  <li><p><font face="Liberation Serif"><font size="3"><a
    href="#monitoring_condor">Checking the WMS collector
    ads</a></font></font></p>
  </li>
</ul>

<h3><a name="monitoring_web"><font face="Verdana"><font size="3">6.1 VO frontend entry Web monitoring</font></font></a></h3>

<p><font face="Liberation Serif"><font size="3">You can either monitor the
frontend as a whole, or just a single entry point.<br>
<br>
The frontend monitoring is located at a URL like the one
below</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font
  size="3">http://frontend1.my.org/vofrontend/monitor/frontend_myVO1_v1/</font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">Moreover, each frontend group
has its own history on the Web.<br>
<br>
Assuming you have a main group, it can be monitored at</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font
  size="3">http://frontend1.my.org/vofrontend/monitor/frontend_myVO1_v1/group_main/</font></font></blockquote>

<h3><a name="monitoring_tools"><font face="Verdana"><font size="3">6.2
VO frontend monitoring via WMS tools</font></font></a></h3>

<p><font face="Liberation Serif"><font size="3">You can get the equivalent of
the Web page snaphot by using </font></font> </p>

<blockquote>
  <font face="Liberation Serif"><font size="3">cd glideinWMS/tools/<br>
  ./wmsXMLView.py -pool gfactory1.my.org</font></font></blockquote>

<h3><a name="monitoring_logs"><font face="Verdana"><font size="3">6.3 VO
frontend group log files </font></font> </a></h3>

<p><font face="Liberation Serif"><font size="3">The vo frontend writes
two log files per entry point <b>frontend_info.YYYYMMDD.log</b> and
<b>frontend_err.YYYYMMDD.log</b>.<br>
<br>
Assuming you have a main group, the log files are in</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font
  size="3">/home/frontend/frontstage/frontend_myVO1_v1/group_main/log</font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">All errors are reported in
the <b>frontend_err.YYYYMMDD.log</b>. file, while <b>frontend_info.YYYYMMDD.log
</b>contains entries about what the VO frontend is doing.</font></font></p>

<h3><a name="monitoring_condor"><font face="Verdana"><font size="3">6.4
VO frontend ClassAds in the WMS Collector </font></font> </a></h3>

<p><font face="Liberation Serif"><font size="3">The VO frontned also
advertises summary information in the WMS collector.<br>
<br>
Use <b>condor_status</b>:</font></font></p>

<blockquote>
  <font face="Liberation Serif"><font size="3">condor_status -pool gfrontend1.my.org
  -any</font></font></blockquote>

<p><font face="Liberation Serif"><font size="3">and look for
<b>glideclient</b> ads.</font></font></p>

<p><font face="Liberation Serif"><font size="3"><a href="index.html">Back to
the index</a></font></font></p>
<hr><P ALIGN=LEFT><b>glideinWMS support:</b> glideinwms-support@fnal.gov</p>
</body>
</html>
